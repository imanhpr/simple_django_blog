{% extends 'blog/base.html' %}

{% block title %}my-blog post.title{% endblock title %}
{% block content %}
<h1>{{ post.title }}</h1>
<p>date : {{ post.publish }} by {{ post.author }}</p>
<p>{{ post.body|linebreaks }}</p>
<p>
    <a href="{% url 'blog:post_share' post.pk %}">Share this post</a>
</p>
<div>
    {% with comments.count as total_comment %}
        <h2>{{ total_comment }} comment{{ total_comment|pluralize }}</h2>
    {% endwith %}
</div>
<div>
    {% for comment in comments %}
        <div>
            <p>
                Comment {{ forloop.counter }} by {{ comment.name }} {{comment.created}}
            </p>
            <p>{{ comment.body }}</p>
        </div>
    {% empty %}
        <p>No Comments to show</p>
    {% endfor %}
</div>

{% if new_comment %}
    <h2>Your Comment Add!</h2>
{% else %}
    <h2>Add new comment</h2>
    <form method="POST">
        {{comment_form.as_p}}
        {% csrf_token %}
        <input class="btn btn-primary" type="submit" value="Add comment">
    </form>
{% endif %}
{% endblock content %}
